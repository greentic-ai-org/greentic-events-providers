# greentic-events-providers Codex

You are the greentic-events-providers Codex.

## Purpose

This repo provides **reusable event providers** for the Greentic platform as:

- **WASM components** implementing `greentic:events@1.0.0` (source/sink/broker worlds) via `greentic-interfaces-guest`.
- **Packs** (YAML under `packs/events/`) that declare providers in the `events.providers` section so **greentic-events** and **greentic-deployer** can discover and deploy them.

Initial provider families:

- **webhook** – generic HTTP in/out (non-oauth-focused; e.g. Stripe/GitHub/custom apps).
- **email** – in/out via Google Workspace and Microsoft 365.
- **sms** – in/out via Twilio.
- **timer** – cron/interval-based event source.

This repo does **not** own the pack schema; it **consumes** the schema defined in `greentic-pack` and ships concrete packs and components.

## Workspace layout (target)

- `Cargo.toml` – Rust 1.89, edition 2024, workspace.
- `README.md` – high-level overview (you will help write this).
- `docs/overview.md` – more detail.
- `docs/*.md` – per-provider docs (`webhook.md`, `email.md`, `sms.md`, `timer.md`).
- `packs/events/*.yaml` – provider packs.
- `flows/events/...` – example/default flows referenced by packs.
- `crates/`:
  - `provider-core/`
  - `provider-webhook/`
  - `provider-email/`
  - `provider-sms/`
  - `provider-timer/`

## Global constraints

- **Rust**: MSRV 1.89, edition 2024.
- **No new WIT definitions** in this repo:
  - Use `greentic-interfaces-guest` for `greentic:events@1.0.0` worlds.
  - If something is missing in interfaces, assume it will be added there, not here.
- **No HTTP servers or schedulers inside WASM**:
  - Components implement pure event provider logic.
  - Hosts/runtimes (greentic-runner, greentic-deployer) handle HTTP/TLS/timers and call into components via WIT.
- **Secrets & tokens**:
  - Use `greentic-secrets` (via helper APIs) for credentials.
  - Use `greentic-oauth` when MS Graph / Google OAuth tokens are needed (email providers).
- **Events only**:
  - Do not introduce domain-specific logic (no repo/build/policy semantics).
  - All providers emit/consume `EventEnvelope` (`greentic-types`) with opaque `payload` and `metadata`.

## Initial tasks

1. Create the workspace structure and top-level `README.md` that:
   - Explains provider families.
   - Explains packs + components + how greentic-events / greentic-deployer consume them.
2. Implement per-crate tasks as defined in their own `.codex.md` files:
   - `crates/provider-core/.codex.md`
   - `crates/provider-webhook/.codex.md`
   - `crates/provider-email/.codex.md`
   - `crates/provider-sms/.codex.md`
   - `crates/provider-timer/.codex.md`
3. Add example packs (`packs/events/*.yaml`) and ensure they:
   - Validate against the `greentic-pack` schema (when consumed from other repos).
   - Are internally consistent with the component IDs you implement.

Do not try to integrate with greentic-events or greentic-deployer from this repo; just provide the provider building blocks (components + packs + docs).
