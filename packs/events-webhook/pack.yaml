pack_id: greentic.events.webhook
version: 0.1.0
kind: application
publisher: greentic
name: greentic.events.webhook
description: Greentic webhook event providers
authors:
  - Greentic Engineering <engineering@greentic.dev>
license: MIT
components:
  - id: events-webhook-source
    version: 1.0.0
    world: greentic:events/source@1.0.0
    supports:
      - event
    profiles:
      default: stateless
      supported:
        - stateless
    capabilities:
      wasi:
        clocks: true
      host:
        secrets:
          required:
            - key: WEBHOOK_SIGNING_SECRET
              required: false
              description: Default signing secret for validating inbound webhook requests
              scope:
                env: "{{env}}"
                tenant: "{{tenant}}"
              format: text
        events:
          inbound: false
          outbound: true
        http:
          server: true
    wasm: components/stub.wasm
  - id: templating.handlebars
    version: 0.0.1
    world: greentic:flow/templating@1.0.0
    supports:
      - messaging
    profiles:
      default: stateless
      supported:
        - stateless
    capabilities:
      wasi:
        clocks: true
        random: true
        filesystem:
          mode: none
          mounts: []
      host:
        messaging:
          inbound: false
          outbound: false
        secrets:
          required: []
        telemetry:
          scope: node
    wasm: components/templating.handlebars/stub.wasm
flows:
  - id: webhook-in-default
    file: flows/in_default.ygtc
    entrypoints:
      - webhook-in-default
  - id: webhook-in-custom-template
    file: flows/in_custom_template.ygtc
    entrypoints: []
events:
  providers:
    - name: "webhook-gateway"
      kind: "source"
      component: "events-webhook-source@1.0.0"
      default_flow: "flows/in_default.ygtc"
      custom_flow: "flows/in_custom_template.ygtc"
      capabilities:
        transport: "webhook"
        reliability: "at_least_once"
        ordering: "none"
        topics:
          - "webhook.*"
